---
title: Vulnerability management
titleSuffix: Microsoft Foundry
description: Learn how Microsoft Foundry manages vulnerabilities in images that the service provides, and how you can get the latest security updates for the components that you manage.
ms.service: azure-ai-foundry
ms.custom:
  - build-2024
  - hub-only
  - dev-focus
ms.topic: concept-article
ms.date: 02/02/2026
ms.reviewer: deeikele
ms.author: jburchel 
author: jonburchel 
ai-usage: ai-assisted
---

# Vulnerability management for Microsoft Foundry

[!INCLUDE [hub-only-alt](../includes/uses-hub-only-alt.md)]

Vulnerability management is the process of detecting, assessing, mitigating, and reporting security vulnerabilities in an organization's systems and software. You and Microsoft share this responsibility.

This article describes your responsibilities and the vulnerability management controls that Foundry provides. Learn how to keep your service instance and apps up to date with the latest security updates and reduce the window of opportunity for cyberattackers.

## Prerequisites

To manage vulnerabilities in your Foundry environment, you need:

- An Azure subscription
- A Foundry hub or project
- Contributor or Owner role on the Foundry hub or project to manage compute resources
- Azure CLI or access to the Foundry portal for compute management
- For compute instance recreation: the following RBAC permissions:
  - `Microsoft.MachineLearningServices/workspaces/computes/write` (create compute instances)
  - `Microsoft.MachineLearningServices/workspaces/computes/delete` (delete compute instances)

## Microsoft-managed VM images

Microsoft manages host OS virtual machine (VM) images for compute instances and serverless compute clusters. Updates are monthly and include the following details:

* For each new VM image version, Microsoft sources the latest OS updates from the original publisher. Using the latest updates helps ensure you get all applicable OS patches. For Foundry, Canonical publishes all Ubuntu images.

* Microsoft updates VM images monthly.  

* In addition to the publisher's patches, Microsoft updates system packages as updates become available.

* Microsoft checks and validates any machine learning packages that might require an upgrade. In most circumstances, new VM images contain the latest package versions.  

* Microsoft builds all VM images on secure subscriptions that run vulnerability scanning regularly. Microsoft flags any unaddressed vulnerabilities and fixes them within the next release.  

* Most images use a monthly release cadence. For compute instances, the image release aligns with the release cadence of the Azure Machine Learning SDK that's preinstalled in the environment.

Microsoft also applies hotfixes when vulnerabilities surface. Microsoft rolls out hotfixes within 72 hours for serverless compute clusters and within a week for compute instances.

> [!NOTE]
> The host OS isn't the OS version you specify for an environment when you train or deploy a model. Environments run inside Docker. Docker runs on the host OS.

## Microsoft-managed container images

[Base Docker images](https://github.com/Azure/AzureML-Containers) that Microsoft maintains for Foundry receive frequent security patches to fix newly discovered vulnerabilities.  

Microsoft updates supported images every two weeks to fix vulnerabilities. The goal is zero vulnerabilities older than 30 days in the latest supported images.

Microsoft releases patched images with a new immutable tag and an updated `:latest` tag. Using the `:latest` tag or pinning a specific image version is a tradeoff between security and environment reproducibility for your machine learning job.

## Managing environments and container images  

In the Foundry portal, Docker images provide the runtime environment for [prompt flow deployments](../how-to/flow-deploy.md). These images start from a Foundry base image.

Although Microsoft patches base images with each release, using the latest image is a tradeoff between reproducibility and vulnerability management. You choose the environment version for your jobs or model deployments.  

By default, you layer dependencies on top of base images when you build an image. After you install extra dependencies on Microsoft-provided images, you're responsible for vulnerability management.  

Your hub includes an Azure Container Registry instance that caches container images. When you build an image, you push it to the container registry. The workspace uses the cached image when you deploy the corresponding environment.

The hub doesn't delete any image from your container registry. Review the need for each image over time. To monitor and maintain environment hygiene, use [Microsoft Defender for Container Registry](/azure/defender-for-cloud/defender-for-container-registries-usage) to scan your images for vulnerabilities. To automate processes based on Microsoft Defender triggers, see [Automate remediation responses](/azure/defender-for-cloud/workflow-automation).


## Vulnerability management on compute hosts

Managed compute nodes in the Foundry portal use Microsoft-managed OS VM images. When you provision a node, it pulls the latest VM image. This behavior applies to compute instances, serverless compute clusters, and managed inference compute.

Although Microsoft regularly patches OS VM images, it doesn't actively scan compute nodes for vulnerabilities while they're in use. For an extra layer of protection, consider network isolation for your compute nodes.
  
Ensuring that your environment is up to date and that compute nodes use the latest OS version is a shared responsibility between you and Microsoft. The service doesn't update busy nodes to the latest VM image. Considerations are slightly different for each compute type, as listed in the following sections.

### Compute instance

Compute instances get the latest VM image when you provision them. Microsoft releases new VM images monthly. After you deploy a compute instance, it doesn't receive ongoing image updates. To stay current with the latest software updates and security patches, use one of these methods:

* Re-create a compute instance to get the latest OS image (recommended).

  If you use this method, you lose data and customizations (such as installed packages) stored on the instance's OS disk and temporary disk.
  
  For more information about image releases, see the [Azure Machine Learning compute instance image release notes](/azure/machine-learning/azure-machine-learning-ci-image-release-notes).

* Regularly update OS and Python packages.

  Connect to your compute instance terminal and run the following commands to update packages:

  * Update the package list with the latest versions:

    ```bash
    sudo apt-get update
    ```

    Expected output: Package lists are refreshed from repositories. You see lines like `Hit:` or `Get:` for each repository.

    **Reference**: [apt-get update](https://manpages.ubuntu.com/manpages/focal/man8/apt-get.8.html)

  * Upgrade packages to the latest versions. Package conflicts might occur when you use this approach:

    ```bash
    sudo apt-get upgrade
    ```

    Expected output: Packages are downloaded and installed. You might be prompted to confirm installation by using `Y/n`.

    **Reference**: [apt-get upgrade](https://manpages.ubuntu.com/manpages/focal/man8/apt-get.8.html)

  * Check for outdated Python packages:

    ```bash
    pip list --outdated
    ```

    Expected output: A table listing packages with available updates (columns: Package, Version, Latest, Type), or empty output if all packages are current.

    **Reference**: [pip list](https://pip.pypa.io/en/stable/cli/pip_list/)

  To verify updates were applied successfully, run:

  ```bash
  # Check for remaining upgradable packages
  sudo apt list --upgradable
  ```

  Expected output: `Listing... Done` with no packages listed means all updates are applied.

  **Reference**: [apt list](https://manpages.ubuntu.com/manpages/focal/man8/apt.8.html)

### Scan for vulnerabilities

Install and run additional scanning software on the compute instance to scan for security problems:

* Use [Trivy](https://github.com/aquasecurity/trivy) to discover OS and Python package-level vulnerabilities. For quick start and usage examples, see the [Trivy documentation](https://aquasecurity.github.io/trivy/).
* Use [ClamAV](https://www.clamav.net/) to discover malware. It comes preinstalled on compute instances. For usage guidance, see the [ClamAV documentation](https://docs.clamav.net/manual/Usage.html).

For automation examples that combine Trivy and ClamAV, see [Compute instance sample setup scripts](https://github.com/Azure/azureml-examples/tree/main/setup/setup-ci).

> [!NOTE]
> You can't install the Microsoft Defender for Servers agent on compute instances.

### Endpoints

Endpoints automatically receive OS host image updates with vulnerability fixes. Microsoft updates images at least once a month.

Compute nodes automatically upgrade to the latest VM image version when it's released. You don't need to take any action.  

## Related content

- [Foundry hubs](ai-resources.md)
- [Create and manage compute instances](../how-to/create-manage-compute.md)
- [Azure Machine Learning compute instance image release notes](/azure/machine-learning/azure-machine-learning-ci-image-release-notes)
- [Vulnerability management best practices](/azure/cloud-adoption-framework/ready/azure-best-practices/ai-machine-learning-enterprise-security)
