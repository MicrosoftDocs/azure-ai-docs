---
title: Work with Azure AI Foundry Agent Service using the Azure AI Foundry for Visual Studio Code extension
titleSuffix: Azure AI Foundry
description: Use this article to learn how to use Azure AI Foundry Agent Service directly in Visual Studio Code.
manager: mcleans
ms.service: azure-ai-foundry
content_well_notification: 
  - AI-contribution
ai-usage: ai-assisted
ms.topic: how-to
zone_pivot_groups: ai-foundry-vsc-extension-languages
ms.date: 10/16/2025
ms.reviewer: erichen
ms.author: johalexander
author: ms-johnalex
---

# Work with Azure AI Foundry Agent Service in Visual Studio Code (Preview)

After you [get started with the AI Foundry the VS Code extension](./get-started-projects-vs-code.md), use [Azure AI Foundry Agent Service](/azure/ai-services/agents/overview) to build agents. Agents are "smart" microservices that:

- Answer questions using their training data or search other sources with Retrieval Augmented Generation (RAG)
- Perform specific actions
- Automate complete workflows

Agents combine AI models with tools to access and interact with your data.

Azure AI Foundry developers can stay productive by developing, testing, and deploying agents in the familiar and powerful environment of VS Code.

[!INCLUDE [feature-preview](../../includes/feature-preview.md)]

## Create and edit Azure AI Agents within the designer view

Follow these steps to create an Azure AI Agent:

1. First, finish the [Get Started](./get-started-projects-vs-code.md#get-started) section to sign in to your Azure resources and set your default project.
 
1. [Deploy a model](./get-started-projects-vs-code.md#deploy-a-model-from-the-model-catalog) to use with your agent.

1. In the Azure AI Foundry Extension view, find the **Resources** section.

1. Select the **+** (plus) icon next to the **Agents** subsection to create a new AI Agent.

     :::image type="content" source="../../media/how-to/get-started-projects-vs-code/select-agent-plus.png" alt-text="Screenshot of the plus sign next to the Agents subsection.":::

### Interact with your agent in the designer

After you choose your save location, both the agent .yaml file and the Designer view will open to edit your AI Agent.

1. Perform the following tasks in the agent designer:

    1. Enter a name for your agent in the prompt.

    1. Select your model deployment name from the dropdown. The deployment name is what you chose when you deployed an existing model.

    1. Configure the following fields. The **ID** is generated by the extension:
    
       - Add a description for your agent
       - Set system instructions 
       - Configure tools for agent use

        :::image type="content" source="../../media/how-to/get-started-projects-vs-code/agent-designer.png" alt-text="Screenshot of the Agent designer that enables you to edit and interact with your AI Agent." lightbox="../../media/how-to/get-started-projects-vs-code/agent-designer.png":::
 
    1. To save the .yaml file, select **File** > **Save** in the VS Code menu bar.

### Explore the Azure AI Agent YAML definition

Your AI Agent .yaml file was opened at the same time the designer was. This file contains the details and setup information for your agent, similar to the following .yaml file example: 

```yml
# yaml-language-server: $schema=https://aka.ms/ai-foundry-vsc/agent/1.0.0
version: 1.0.0
name: my-agent
description: Description of the agent
id: ''
metadata:
  authors:
    - author1
    - author2
  tags:
    - tag1
    - tag2
model:
  id: 'gpt-4o-1'
  options:
    temperature: 1
    top_p: 1
instructions: Instructions for the agent
tools: []
```

## Add tools to the Azure AI Agent

Azure AI Agent Service has a set of tools that you can use to interact with your data sources. 

### Available tools for Azure AI Agents in the Azure AI Foundry VS Code extension

The following tools are available in the Azure AI Foundry VS Code extension:

  - [Grounding with Bing search](/azure/ai-foundry/agents/how-to/tools/bing-grounding)
  - [File search](/azure/ai-services/agents/how-to/tools/file-search?tabs=python&pivots=overview) 
  - [Code interpreter](/azure/ai-foundry/agents/how-to/tools/file-search)
  - [OpenAPI Specified tools](/azure/ai-foundry/agents/how-to/tools/openapi-spec)
  - [Model Context Protocol (MCP)](/azure/ai-foundry/agents/how-to/tools/model-context-protocol)

> [!NOTE]
> For more information about using MCP tools, see [Use Model Context Protocol (MCP) tools with Azure AI Agents](./vs-code-agents-mcp.md).

### Add a tool to the AI Agent

Add a tool to the AI Agent with the following steps:

  1. Select the **Add tool** button in the top-right corner of the **TOOL** section in the designer to show the dropdown. Choose the tool you want to add.
    
     :::image type="content" source="../../media/how-to/get-started-projects-vs-code/agent-tool-plus.png" alt-text="Screenshot of the Agent designer TOOL section with the plus icon highlighted." lightbox="../../media/how-to/get-started-projects-vs-code/agent-tool-plus.png":::
    
   1. The designer displays the appropriate pane to configure the tool, as in the following images:

      - Code interpreter tool dialog box:
        :::image type="content" source="../../media/how-to/get-started-projects-vs-code/agent-ci-tool-dialog.png" alt-text="Screenshot of the Code interpreter tool dialog box." lightbox="../../media/how-to/get-started-projects-vs-code/agent-ci-tool-dialog.png":::

      - File upload tool dialog box:
        :::image type="content" source="../../media/how-to/get-started-projects-vs-code/agent-file-search-tool-dialog.png" alt-text="Screenshot of the File upload tool dialog box." lightbox="../../media/how-to/get-started-projects-vs-code/agent-file-search-tool-dialog.png":::
      
      - Grounding with Bing Search dialog box:
        :::image type="content" source="../../media/how-to/get-started-projects-vs-code/agent-bing-tool-dialog.png" alt-text="Screenshot of the Grounding with Bing Search tool dialog box." lightbox="../../media/how-to/get-started-projects-vs-code/agent-bing-tool-dialog.png":::

      - OpenAPI 3.0 Specified dialog box:
        :::image type="content" source="../../media/how-to/get-started-projects-vs-code/agent-openapi-tool-dialog.png" alt-text="Screenshot of the OpenAPI 3.0 Specified tool dialog box." lightbox="../../media/how-to/get-started-projects-vs-code/agent-openapi-tool-dialog.png":::

   1. After entering the required information, select the **Upload and save** button in the bottom-left corner.
     
      > [!NOTE]
      > When you add a tool, you can also add any new assets, it needs. For example, if you add a File Search tool, you can use an existing vector store asset or make a new asset for your vector store to host your uploaded files.
    
   1. After entering the required information, select the **Create tool** button in the bottom-left corner.

## Create Azure AI Agents on the Azure AI Foundry Studio

Create your agent directly on Azure AI Foundry with the following steps:

1.  Select the **Create on Azure AI Foundry** button in the bottom-left of the designer.

    :::image type="content" source="../../media/how-to/get-started-projects-vs-code/agent-deploy.png" alt-text="Screenshot of the Agent designer with the 'Deploy to Azure AI Foundry' button highlighted." lightbox="../../media/how-to/get-started-projects-vs-code/agent-deploy.png":::

1. In the VS Code navbar, refresh the **Azure Resources** view. The deployed agent is displayed under the **Agents** subsection.

    :::image type="content" source="../../media/how-to/get-started-projects-vs-code/agent-deployed.png" alt-text="Screenshot of the 'Azure Resources' view. The deployed agent is highlighted under the 'Agents' subsection." lightbox="../../media/how-to/get-started-projects-vs-code/agent-deployed.png":::

### View the deployed AI Agent details

Selecting the deployed agent opens the **Agent Preferences** page in a view only mode.  

- Select the **Edit Agent** button to view the Agent designer and yaml definition of the agent for editing. 
- Select the **Open Code File** button to create a sample code file that uses the agent. 
- Select the **Open Playground** button to open the **Agent Playground**.

    :::image type="content" source="../../media/how-to/get-started-projects-vs-code/deployed-agent-view.png" alt-text="Screenshot of the Agent Preferences page with the 'Edit Agent', 'Open Code File', and 'Open Playground' buttons highlighted." lightbox="../../media/how-to/get-started-projects-vs-code/deployed-agent-view.png":::

## Edit and update the deployed AI Agent

To edit the deployed agent, select the **Edit Agent** button in the **Agent Preferences** page. The agent designer opens with the agent .yaml file.
Edit the agent's configuration, such as the model, tools, and instructions. After you finish editing, select the **Update on Azure AI Foundry** button in the lower left corner to save your changes.

:::image type="content" source="../../media/how-to/get-started-projects-vs-code/update-agent.png" alt-text="Screenshot of the Agent Preferences page with the 'Update on Azure AI Foundry' button highlighted." lightbox="../../media/how-to/get-started-projects-vs-code/update-agent.png":::

## Explore the agent sample code

Create a sample code file using the following steps.

1. Right-click on your deployed agent and select the **Open Code File** option or select the **Open Code File** button in the **Agent Preferences** page.

    :::image type="content" source="../../media/how-to/get-started-projects-vs-code/open-agent-code-file.png" alt-text="Screenshot of the agent context menu with the Open Code file option highlighted." lightbox="../../media/how-to/get-started-projects-vs-code/open-agent-code-file.png":::

1. In the top center, select your preferred SDK to use in the **Choose preferred SDK** dropdown and press Enter.

    :::image type="content" source="../../media/how-to/get-started-projects-vs-code/choose-agent-preferred-sdk.png" alt-text="Screenshot of the Choose preferred SDK dropdown for agent code file selection." lightbox="../../media/how-to/get-started-projects-vs-code/choose-agent-preferred-sdk.png":::

1. In the top center, select your preferred language to use in the **Choose language** dropdown and press Enter.

    :::image type="content" source="../../media/how-to/get-started-projects-vs-code/choose-agent-language.png" alt-text="Screenshot of the Choose language dropdown for agent code file selection." lightbox="../../media/how-to/get-started-projects-vs-code/choose-agent-language.png":::

1. In the top center, select your preferred authentication method to use in the **Choose auth method** dropdown and press Enter.

    :::image type="content" source="../../media/how-to/get-started-projects-vs-code/choose-agent-authn-method.png" alt-text="Screenshot of the Choose authentication method dropdown for agent code file selection." lightbox="../../media/how-to/get-started-projects-vs-code/choose-agent-authn-method.png":::

### Explore the sample code file

This Python sample code file that demonstrates a basic call to interact with the agent through the AI Foundry projects API: 

:::image type="content" source="../../media/how-to/get-started-projects-vs-code/sample-agent-code-file.png" alt-text="Screenshot of generated agent sample code file." lightbox="../../media/how-to/get-started-projects-vs-code/sample-agent-code-file.png":::

## Interact with Agents using agents playground

Open the **Agents Playground** using the following steps:

1. Right-click on your deployed agent and select the **Open Playground** option This action starts a thread with your agent and let you send messages. 

1. Alternatively, select the **Agent Playground** link in the **Tools** subsection, and select your agent from the top-center list. 

1. The **Playground** page is displayed.

    :::image type="content" source="../../media/how-to/get-started-projects-vs-code/agent-display-playground.png" alt-text="Screenshot of the **Agents Playground** VS Code page." lightbox="../../media/how-to/get-started-projects-vs-code/agent-display-playground.png":::

1. Type your prompt and see the outputs. In this example, the **Grounding with Bing search** tool is used to search the web for information. The agent uses the model and tools you configured in the agent designer. The source of the information is displayed in the **Agent Annotations** section, highlighted in the following image. 

    :::image type="content" source="../../media/how-to/get-started-projects-vs-code/agent-playground-run.png" alt-text="Screenshot of the Agents Playground page with agent annotations highlighted in VS Code." lightbox="../../media/how-to/get-started-projects-vs-code/agent-playground-run.png":::
 :::image type="content" source="../../media/how-to/get-started-projects-vs-code/choose-agent-language.png" alt-text="Screenshot of the Choose language dropdown for agent code file selection." lightbox="../../media/how-to/get-started-projects-vs-code/choose-agent-language.png":::

1. In the top center, select your preferred authentication method to use in the **Choose auth method** dropdown and press Enter.

    :::image type="content" source="../../media/how-to/get-started-projects-vs-code/choose-agent-authn-method.png" alt-text="Screenshot of the Choose authentication method dropdown for agent code file selection." lightbox="../../media/how-to/get-started-projects-vs-code/choose-agent-authn-method.png":::

### Explore the sample code file

This Python sample code file that demonstrates a basic call to interact with the agent through the AI Foundry projects API: 

:::image type="content" source="../../media/how-to/get-started-projects-vs-code/sample-agent-code-file.png" alt-text="Screenshot of generated agent sample code file." lightbox="../../media/how-to/get-started-projects-vs-code/sample-agent-code-file.png":::


## Explore Threads

The **Threads** subsection displays the threads created during a run with your agent. In the Azure Resources Extension view, select the **caret** icon in front of the **Threads** subsection to view the list of threads.

:::image type="content" source="../../media/how-to/get-started-projects-vs-code/thread-list.png" alt-text="Screenshot of the threads in the Threads subsection." lightbox="../../media/how-to/get-started-projects-vs-code/thread-list.png":::

###  View thread details

Select a thread to see the **Thread Details** page.

:::image type="content" source="../../media/how-to/get-started-projects-vs-code/thread-view.png" alt-text="Screenshot of the thread details view." lightbox="../../media/how-to/get-started-projects-vs-code/thread-view.png":::

- A **Thread** is a conversation session between an agent and a user. Threads store **Messages** and automatically handle truncation to fit content into a model's context.

- A **Message** is a single interaction between the agent and the user. Messages can include text, images, and other files. Messages are stored as a list on the Thread.

- A **Run** is a single execution of an agent. Each run can have multiple threads, and each thread can have multiple messages. The agent uses its configuration and Thread's Messages to perform tasks by calling models and tools. As part of a Run, the agent appends Messages to the Thread.

###  View run details

Select the **View run info** button in the **Thread Details** page to see the run information in a JSON file.

:::image type="content" source="../../media/how-to/get-started-projects-vs-code/run-file.png" alt-text="Screenshot of the run details .json file." lightbox="../../media/how-to/get-started-projects-vs-code/run-file.png":::

## Work with Multi-Agent Workflows
The AI Foundry VS Code extension enables you to create multi-agent workflows. A multi-agent workflow is a sequence of agents that work together to accomplish a task. Each agent in the workflow can have its own model, tools, and instructions.

### Create a new multi-agent workflow
Create a new multi-agent workflow with the following steps:
  1. Open Command Palette (`Ctrl+Shift+P`).
  1. Run command: `>Azure AI Foundry: Create a New Multi-agent Workflow`.
  1. Select programming language.
  1. Select a folder to save your new workflow.
  1. Enter a name for your workflow project.
  1. A new folder is created with the necessary files for your multi-agent workflow project, including a sample code file to get you started.

### Install Dependencies

Install the required dependencies for your multi-agent workflow project. The dependencies vary based on the programming language you selected when creating the project.

::: zone pivot="python"

Install the following packages from source:
```bash
    git clone https://github.com/microsoft/agent-framework.git
    pip install -e agent-framework/python/packages/azure-ai -e agent-framework/python/packages/core
```
::: zone-end

::: zone pivot="csharp"

## Prerequisites

To run the sample multi-agent workflow C# project, ensure you have the following prerequisites:

- .NET 9 SDK or higher
- An AI Foundry Project or Azure OpenAI resource

## Setup and installation

1. **Install the .NET SDK**

   Download and install the .NET 9 SDK from the [official .NET website](https://dotnet.microsoft.com/download).

2. **Restore NuGet packages**

    Go to your project directory and run this command to get the needed NuGet packages:

    ```bash
    dotnet restore
    ```

3. **Configure environment variables**

     The sample workflow project creates an `.env` file with the needed environment variables. Create or update the `.env` file with your Azure OpenAI credentials:

     ```
     # Your Azure OpenAI endpoint
     AZURE_OPENAI_ENDPOINT=https://<your-openai-resource>.openai.azure.com/
       
     # Your Azure OpenAI API key
     AZURE_OPENAI_API_KEY=<your-api-key>
       
     # Your model deployment name in Azure OpenAI
     MODEL_DEPLOYMENT_NAME=<your-model-deployment-name>
     ```

     > [!IMPORTANT]
     > Never commit the `.env` file to version control. Add it to your `.gitignore` file.

::: zone-end

### Run your multi-agent workflow locally

::: zone pivot="csharp"

Before you run `dotnet run` locally, set up the needed environment variables. You can get these values from the Azure AI Foundry portal. 

  1. Set up your environment variables based on your operating system:

     #### [Windows (PowerShell)](#tab/windows-powershell)

     ```powershell
     $env:AZURE_OPENAI_ENDPOINT="https://your-resource-name.openai.azure.com/"
     $env:MODEL_DEPLOYMENT_NAME="your-deployment-name"
     $env:AZURE_OPENAI_API_KEY="your-api-key"
     ```
   
     #### [Windows (Command Prompt)](#tab/windows-command-prompt)   

     ```dos   
     set AZURE_OPENAI_ENDPOINT=https://your-resource-name.openai.azure.com/
     set MODEL_DEPLOYMENT_NAME=your-deployment-name
     set AZURE_OPENAI_API_KEY=your-api-key
     ```

     #### [macOS/Linux (Bash)](#tab/macos-linux-bash)  
 
     ```bash
     export AZURE_OPENAI_ENDPOINT="https://your-resource-name.openai.azure.com/"
     export MODEL_DEPLOYMENT_NAME="your-deployment-name"
     export AZURE_OPENAI_API_KEY="your-api-key"
     ```

     ---

1. Run the application using the following commands:
    ```bash
    dotnet build
    dotnet run
    ```
::: zone-end

::: zone pivot="python"

Update the `.env` file in the root directory of your project and add the following environment variables.

  ```
  AZURE_OPENAI_ENDPOINT=https://your-resource-name.openai.azure.com/
  AZURE_OPENAI_API_KEY=your-api-key
  MODEL_DEPLOYMENT_NAME=your-deployment-name
  ```

Run the application using:
  ```bash
  python workflow.py
  ```

### Visualize multi-agent workflow execution

Visualize your multi-agent workflows using the Azure AI Foundry VS Code extension. This extension allows you to see the interactions between different agents and how they collaborate to achieve the desired outcome.

To monitor and visualize your multi-agent workflow execution in real-time (currently available for Python interactive mode only):

  1. Open the Command Palette (`Ctrl+Shift+P`)
  1. Run the command: `>Azure AI Foundry: Visualize the Multi-Agent Workflow`
  1. A new tab opens in VS Code displaying the execution graph
  1. The visualization updates automatically as your workflow progresses, showing the flow between agents and their interactions.

  > [!NOTE]
  > For any port conflicts, change the visualization port by setting the `FOUNDRY_OTLP_PORT` environment variable, and update the observability port in the `workflow.py` file accordingly.
  >
  > For example, to change the port to `4318`:
  >   ```bash
  >   export FOUNDRY_OTLP_PORT=4318
  >   ```
  > In `workflow.py`, update the port number in the observability configuration:
  >   ```python
  >     setup_observability(vs_code_extension_port=4318)
  >   ```

## Configure visualizer for your own workflow

Enable workflow visualization in your own workflows by adding the following code snippet:

  ```python
  from agent_framework.observability import setup_observability
setup_observability(vs_code_extension_port=4317)  # default port is 4317
```

The following steps outline how to monitor and visualize your multi-agent workflow execution in real-time (currently available for Python interactive mode only):

  1. Open the Command Palette (`Ctrl+Shift+P`)
  1. Run the command: `>Azure AI Foundry: Visualize the Multi-Agent Workflow`
  1. A new tab opens in VS Code displaying the execution graph
  1. The visualization updates automatically as your workflow progresses, showing the flow between agents and their interactions.

::: zone-end

## Clean up resources

The Azure resources that you created in this article are billed to your Azure subscription. If you don't expect to need these resources in the future, delete them to avoid incurring more charges.

### Delete your agents

[!INCLUDE [tip-left-pane](../../includes/tip-left-pane.md)]

Delete the deployed agent in the [online AI Foundry portal](https://ai.azure.com/?cid=learnDocs). Select **Agents** from the navigation menu on the left, select your agent, then select the **Delete** button.

:::image type="content" source="../../media/how-to/get-started-projects-vs-code/delete-agent.png" alt-text="Screenshot of the AI Foundry portal with Agents from the navigation menu on the left and the Delete button highlighted." lightbox="../../media/how-to/get-started-projects-vs-code/delete-agent.png":::

### Delete your models

1. In the VS Code navbar, refresh the **Azure Resources** view. Expand the **Models** subsection to display the list of deployed models.

1. Right-click on your deployed model to delete and select the **Delete** option.

    :::image type="content" source="../../media/how-to/get-started-projects-vs-code/delete-model.png" alt-text="Screenshot of the model context menu with the Delete option highlighted." lightbox="../../media/how-to/get-started-projects-vs-code/delete-model.png":::

### Delete your tools

Delete the connected tool with the following steps:

1. Open the Azure portal
1. Select the Azure Resource Group containing the tool.
1. Select the **Delete** button.  

##    Next steps

- Learn about the tools you can use with Azure AI Agents, such as [file search](/azure/ai-services/agents/how-to/tools/file-search?tabs=python&pivots=overview), or [code interpreter](/azure/ai-services/agents/how-to/tools/code-interpreter?tabs=python&pivots=overview).
