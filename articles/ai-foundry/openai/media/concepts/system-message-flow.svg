<svg xmlns="http://www.w3.org/2000/svg" width="960" height="360" viewBox="0 0 960 360" role="img" aria-labelledby="title desc">
  <title id="title">System message and safety mitigations flow</title>
  <desc id="desc">Flow diagram showing user prompt and system message shaping model response, with a safety stack influencing the response.</desc>

  <defs>
    <style>
      .box { fill: #ffffff; stroke: #2b2b2b; stroke-width: 2; }
      .label { font-family: Segoe UI, Arial, sans-serif; font-size: 18px; fill: #1a1a1a; }
      .small { font-family: Segoe UI, Arial, sans-serif; font-size: 14px; fill: #1a1a1a; }
      .arrow { stroke: #2b2b2b; stroke-width: 2; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2b2b2b" />
    </marker>
  </defs>

  <!-- Boxes -->
  <rect class="box" x="40" y="60" width="240" height="90" rx="12" />
  <text class="label" x="160" y="105" text-anchor="middle">User prompt</text>

  <rect class="box" x="40" y="190" width="240" height="110" rx="12" />
  <text class="label" x="160" y="230" text-anchor="middle">System message</text>
  <text class="small" x="160" y="260" text-anchor="middle">Instructions, tone, boundaries</text>

  <rect class="box" x="360" y="120" width="240" height="120" rx="12" />
  <text class="label" x="480" y="165" text-anchor="middle">Model</text>
  <text class="small" x="480" y="195" text-anchor="middle">Generates output using both inputs</text>

  <rect class="box" x="680" y="120" width="240" height="120" rx="12" />
  <text class="label" x="800" y="165" text-anchor="middle">Response</text>
  <text class="small" x="800" y="195" text-anchor="middle">Quality + safety outcomes</text>

  <rect class="box" x="360" y="20" width="560" height="70" rx="12" />
  <text class="label" x="640" y="55" text-anchor="middle">Safety stack</text>
  <text class="small" x="640" y="80" text-anchor="middle">Model training, grounding, content safety, UX/UI mitigations</text>

  <!-- Arrows -->
  <line class="arrow" x1="280" y1="105" x2="360" y2="165" />
  <line class="arrow" x1="280" y1="245" x2="360" y2="195" />
  <line class="arrow" x1="600" y1="180" x2="680" y2="180" />
  <line class="arrow" x1="640" y1="90" x2="640" y2="120" />
</svg>
